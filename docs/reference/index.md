# Sketch.export

Provides support for exporting assets from `sketch`-documents. [More…](#detailed-description)

## Properties

### Module settings

- [`cleanBeforeExport`](#cleanbeforeexport): `bool`
- [`mode`](#mode): `stringList`
- [`sketchtoolPath`](#sketchtoolpath): `path`
- [`workingDir`](#workingdir): `string`

### Export settings

- [`background`](#background): `string`
- [`formats`](#formats): `stringList`
- [`groupContentsOnly`](#groupcontentsonly): `bool`
- [`items`](#items): `stringList`
- [`outputDir`](#outputdir): `string`
- [`overwrite`](#overwrite): `bool`
- [`saveForWeb`](#saveforweb): `bool`
- [`scales`](#scales): `varList`
- [`trimmed`](#trimmed): `bool`
- [`useIdForName`](#useidforname): `bool`

## Detailed Description

This modules does all the hard job of exporting assets from a sketch document or several of those. It can be used in conjunction with [`SketchExport`](../getting-started/usage.md#using-sketchexport-product) or separately with your [custom products](../getting-started/usage.md#using-custom-product).

Most probably, you won't touch any of [module settings](#module-settings) except the exporting [mode](#mode) which defines what actually to export and can be used as following:

```qml hl_lines="3"
SketchExport {
	files: '*.sketch'
	Sketch.export.mode: 'pages'
}
```
or
```qml hl_lines="3"
SketchExport {
	files: '*.sketch'
	Sketch.export.mode: ['layers', 'artboards']
}
```

The [export settings](#export-settings) give you an ability to set properties for **all [modes](#mode)** at once. However, you can always override those for a specific mode using corresponding properties from auxiliary modules [`Sketch.layers`][layers], [`Sketch.artboards`][artboards], [`Sketch.pages`][pages], and [`Sketch.preview`][preview].

More specific export settings always have the priority. For instance:

```qml linenums="1" hl_lines="7 10 24 27"
import qbs

SketchExport {
	name: 'sketch-assets'

	Sketch.export.modes: ['layers', 'pages']
	Sketch.export.formats: 'svg'

	// Overrides Sketch.export.formats for pages only
	Sketch.pages.formats: 'pdf'

	Group {
		files: 'one.sketch'
		// We don't export artboards, so this is ignored:
		Sketch.artboards.formats: ['webp', 'eps']

		// Layers are exported in SVG, pages – in PDF
	}

	Group {
		files: 'two.sketch'

		// Overrides Sketch.export.formats from the product
		Sketch.layers.formats: ['png', 'svg']

		// Overrides Sketch.pages.formats from the product
		Sketch.pages.formats: 'TIFF'

		// Layers are exported in PNG and SVG, pages – in TIFF
	}
}
```

!!! info "Note on common properties"

	The auxiliary modules have some additional properties specific only to them, so check their documentation for details.

!!! warning "Note on `'preview'` mode"

	The [`Sketch.preview`][preview] module provides way less properties comparing to other aux modules. So, any properties set in `Sketch.export` will be ignored for preview mode if they do not exist in that module.

## File Tags

### Input

| Tag      | Auto-tagged patterns | Description                                             |
| -------- | -------------------- | ------------------------------------------------------- |
| `sketch` | *.sketch             | Sketch documents used as a source for exporting assets. |

### Output

| Tag                                               | Description                                                                                       |
| ------------------------------------------------- | ------------------------------------------------------------------------------------------------- |
| `sketch.export`                                   | Every asset generated by this module is marked with this tag.                                     |
| `png`, `jpg`, `tiff`, `webp`, `pdf`, `eps`, `svg` | Every exported asset is also marked by a tag that corresponds to its file extension.              |
| `@1x`, `@2x`, `@3x`, `@4x`                        | Every exported asset is also marked by a tag that corresponds to its scale.                       |
| `@1x.9`, `@2x.9`, `@3x.9`, `@4x.9`                | Every exported 9-patch asset is additionally tagged with that corresponds scale with `.9` suffix. |

### Intermediate

??? info "Tags used internally"

	| Tag                  | Description                                                                |
	| -------------------- | -------------------------------------------------------------------------- |
	| `sketch.export-list` | Text file that contains the list of absolute paths of all exported assets. |

## Property Documentation

#### `background` {.string-type-prop}

:	Allows to set/override the background color to use when exporting slices. Replaces any background specified in the document.

	**Allowed values:**

	- color literal (`'#rgb'`, `'#rgba'`, `'#rrggbb'`, or `'#rrggbbaa'`)
	- color name

		??? example "List of all names"

			---8<--- "docs/reference/color-names.html"

	- `rgb`/`rgba` function

  		For example: `'rgb(128, 0, 255)'`, `'rgba(50%, 0, 100%, 50%)'`.

	- `hsl`/`hsla` function

  		For example: `'hsl(270deg, 100%, 50%)'`, `'hsla(270, 100, 50, 0.5)'`

	**Default:** `undefined`

#### `cleanBeforeExport` {.bool-type-prop}

:	Specifies whether to clean the output folder before each new export.

	**Default:** `true`

#### `formats` {.stringList-type-prop}

:	The format in which assets are generated. If you set this value, it will override your export presets in the documents.

	!!! warning "Preview format"

		In the `'preview'` [mode](#mode), the images are always generated in PNG format.

	!!! tip

		If empty list is provided, then the default [sketchtool][sketchtool]'s behavior is used. In `'layers'` [mode](#mode) it generates assets according to the exporting presets set in documents. In other modes, it generates PNG by default.

	**Allowed values:** `'png'` | `'jpg'` | `'tiff'` | `'webp'` | `'pdf'` | `'eps'` |` 'svg'`

	**Default:** `[]`

#### `groupContentsOnly` {.bool-type-prop}

:	Export only layers that are contained within the group.

	**Default:** `false`

#### `items` {.stringList-type-prop}

:	List of artboard/slice names or IDs to export. You can retrieve the IDs from the [metadata](metadata.md). If you specify this value, it will override the export presets defined in the document.

	!!! tip

		If empty list is provided, then the default [sketchtool][sketchtool]'s behavior is used which is to generate assets for all exportable artboards/slices.

	**Default:** `[]`

#### `mode` {.stringList-type-prop}

:	Gives an ability to choose what to export. You can specify either a single value or a list.

	**Allowed values:** `'layers'` | `'artboards'` | `'pages'` | `'preview'`

	**Default:** `'layers'`

#### `outputDir` {.string-type-prop}

:	If you set this property, the assets are exported to folder with this name relatively to [`workingDir`](#workingdir). In other words, the resulting filename is prepended by `outputDir/`.

	**Default:** `undefined`

#### `overwrite` {.bool-type-prop}

:	Set this to true to allow to overwrite existing files with newly generated once.

	!!! bug "I couldn't make it work"

		I tried this parameter with the [sketchtool][sketchtool], however, it had no influence. Maybe it doesn't work or maybe I did something wrong.

	**Default:** `false`

#### `saveForWeb` {.bool-type-prop}

:	Export web-ready images. Setting this option to `true` strips out additional file data from some images, such as EXIF metadata and color profiles.

	**Default:** `false`

#### `scales` {.varList-type-prop}

:	Scales to be used for exporting of assets. This allows you to scale pictures up (@2x, @3x, @4x, etc.) or down (@0.5x, @0.25x, etc.). You can provide a single value or a list. If you specify this value, it will override the export presets defined in the document.

	!!! info "Floating-point scaling factor"

		It appears that [sketchtool][sketchtool] allows to use floats only when scaling down, i.e. for $0 < scale < 1$. If you try to set this property to something like 2.5, the fractional part is trancated.

	!!! tip

		If empty list is provided, then the default [sketchtool][sketchtool]'s behavior is used: all assets are exported according to the presets defined in the document or as `@1x`.

	**Default:** `[]`

#### `sketchtoolPath` {.path-type-prop}

:	The path to the [`sketchtool`][sketchtool] that will be used for exporting. Usually, there is no need to change this value.

	**Default:** the binary from the first found Sketch.app installed in your system.

#### `trimmed` {.bool-type-prop}

:	Export images trimmed.

	**Default:** `false`

#### `useIdForName` {.bool-type-prop}

:	Name exported images using their ID rather than their name.

	You can also retrieve the IDs from the [metadata](metadata.md).

	**Default:** `false`

#### `workingDir` {.path-type-prop .readonly-prop}

:	Contains the path to the export working directory. Useful when you want to [install generated files](../getting-started/usage.md#installing-generated-files) _preserving_ the folder structure.


[export]: ./index.md
[metadata]: ./metadata.md
[layers]: ./layers.md
[artboards]: ./artboards.md
[pages]: ./pages.md
[preview]: ./preview.md

[sketchtool]: https://developer.sketch.com/cli/
